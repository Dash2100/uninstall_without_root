<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum=1, shrink-to-fit=no" />
    <meta name="renderer" content="webkit" />

    <!-- Node.js integration script -->
    <script src="./script.js"></script>

    <!-- app script -->
    <script src="./scripts/settings.js" defer></script>
    <script src="./scripts/alert.js" defer></script>
    <script src="./scripts/func.js" defer></script>

    <!-- mdui -->
    <script src="https://unpkg.com/mdui@2/mdui.global.js" defer></script>
    <link rel="stylesheet" href="https://unpkg.com/mdui@2/mdui.css">

    <!-- icon -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <!-- Filled -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"> <!-- Outlined -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet"> <!-- Rounded -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet"> <!-- Sharp -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Two+Tone" rel="stylesheet"> <!-- Two Tone -->

    <!-- tailwindcss -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <!-- main CSS -->
    <link rel="stylesheet" href="./style.css">

    <title>解除安裝原廠應用程式免ROOT</title>
</head>

<body class="mdui-theme-dark w-screen h-screen select-none overflow-hidden" onload="initApp()">

    <!-- app loading overlay -->
    <!-- <mdui-card variant="elevated"
        class="loading-card fixed top-0 left-0 right-0 bottom-0 m-auto w-screen h-screen flex flex-col justify-center items-center rounded-none z-50">
    </mdui-card> -->

    <!-- page-1 appList -->
    <div id="appList" class="page">

        <!-- app title bar -->
        <mdui-top-app-bar class="relative">
            <mdui-top-app-bar-title class="ml-5 font-bold">應用程式管理</mdui-top-app-bar-title>
            <mdui-button-icon icon="link" id="icon-connected" class="mx-5 hidden" onclick="getDevice();">
            </mdui-button-icon>
            <mdui-button-icon icon="link_off" id="icon-disconnected" class="mx-5" onclick="getDevice();">
            </mdui-button-icon>
        </mdui-top-app-bar>

        <!-- search bar -->
        <div class="w-full flex gap-3 justify-center items-center py-4">
            <mdui-text-field icon="search" label="查詢應用程式"
                class="w-9/12 max-w-2xl rounded-full overflow-hidden shadow-none"></mdui-text-field>
            <mdui-button-icon variant="filled" icon="search" class="h-12 w-12"></mdui-button-icon>
        </div>

        <!-- content -->
        <div class="p-8 pt-3">
            <mdui-card class="flex flex-col overflow-auto app_list" id="app_list">
                <!-- app list here -->
            </mdui-card>
        </div>

        <!-- floating action button -->
        <mdui-fab icon="refresh" class="fixed bottom-32 right-6" onclick="getAppList();"></mdui-fab>

    </div>

    <!-- page-2 settings -->
    <div id="settings" class="page">

        <!-- app title bar -->
        <mdui-top-app-bar class=" relative">
            <mdui-top-app-bar-title class="ml-5 font-bold">功能設定</mdui-top-app-bar-title>
        </mdui-top-app-bar>

        <!-- content -->
        <div class="p-8 pt-3">
            <div class="flex flex-col gap-4">
                <mdui-card class="w-full h-20 flex">
                    <mdui-avatar class="my-auto mx-4" icon="translate"></mdui-avatar>
                    <div class="flex flex-col justify-center">
                        <p class="text-lg">顯示語言</p>
                        <p class="text-md text-gray-500">
                            切換本工具的語言
                        </p>
                    </div>
                    <mdui-segmented-button-group class="my-auto ml-auto mr-6" required selects="single" value="zh"
                        id="settings-language">
                        <mdui-segmented-button value="zh">中文</mdui-segmented-button>
                        <mdui-segmented-button value="eng">ENG</mdui-segmented-button>
                    </mdui-segmented-button-group>
                </mdui-card>
                <mdui-card class="w-full h-20 flex">
                    <mdui-avatar class="my-auto mx-4" icon="contrast"></mdui-avatar>
                    <div class="flex flex-col justify-center">
                        <p class="text-lg">暗色主題</p>
                        <p class="text-md text-gray-500">
                            背景及文字將變為深色
                        </p>
                    </div>
                    <mdui-switch class="my-auto ml-auto mr-6" id="settings-darkmode"></mdui-switch>
                </mdui-card>
                <mdui-card class="w-full h-20 flex">
                    <mdui-avatar class="my-auto mx-4" icon="delete"></mdui-avatar>
                    <div class="flex flex-col justify-center">
                        <p class="text-lg">同時刪除資料</p>
                        <p class="text-md text-gray-500">
                            預設勾選「同時刪除APP資料」
                        </p>
                    </div>
                    <mdui-switch class="my-auto ml-auto mr-6" id="settings-appdata"></mdui-switch>
                </mdui-card>
                <mdui-card class="w-full h-20 flex">
                    <mdui-avatar class="my-auto mx-4" icon="adb"></mdui-avatar>
                    <div class="flex flex-col justify-center">
                        <p class="text-lg">除錯模式</p>
                        <p class="text-md text-gray-500">
                            開啟後會顯示 ADB Console
                        </p>
                    </div>
                    <mdui-switch class="my-auto ml-auto mr-6" id="settings-debugmode"></mdui-switch>
                </mdui-card>
                <mdui-card class="w-full h-20 flex">
                    <mdui-avatar class="my-auto mx-4" icon="folder"></mdui-avatar>
                    <div class="flex flex-col justify-center">
                        <p class="text-lg">提取 APK 儲存路徑</p>
                        <p class="text-md text-gray-500" id="settings-extract-path">
                            Extract APK Path
                        </p>
                    </div>
                    <mdui-button-icon variant="filled" icon="search" class="my-auto ml-auto mr-6"
                        id="settings-chapkpath"></mdui-button-icon>
                </mdui-card>
            </div>
        </div>

        <!-- <mdui-fab icon="refresh" class="fixed bottom-32 right-6" onclick="getAppList();">Hello</mdui-fab> -->
        <mdui-fab extended icon="refresh" class="fixed bottom-32 right-9" id="settings-reset">重置設定</mdui-fab>

    </div>

    <!-- page-3 about -->
    <div id="about" class="page">

        <!-- app title bar -->
        <mdui-top-app-bar class=" relative">
            <mdui-top-app-bar-title class="ml-5 font-bold">關於本工具</mdui-top-app-bar-title>
        </mdui-top-app-bar>

        <!-- content -->
        <div class="p-8 pt-3">
            <div class="flex flex-col gap-4">
                <mdui-card class="w-full flex flex-col p-8 gap-5">
                    <mdui-avatar class="mx-auto w-28 h-28"
                        src="https://avatars.githubusercontent.com/u/87257550?v=4"></mdui-avatar>
                    <div class="flex flex-col justify-center gap-2">
                        <p class="text-lg text-center font-bold">解除安裝原廠應用程式免ROOT</p>
                        <p class="text-md text-gray-500 text-center">
                            一個專為 Android 手機設計的免 ROOT 解除安裝程式工具，專治那些刪不掉的原廠 APP
                        </p>

                        <!-- social link -->
                        <div class="flex gap-4 justify-center my-5">
                            <mdui-chip icon="code">GitHub</mdui-chip>
                            <mdui-chip icon="subscriptions">YouTube</mdui-chip>
                            <mdui-chip icon="bug_report">BUG Report</mdui-chip>
                        </div>

                        <p class="text-md text-gray-500 text-center">
                            版本：beta 0.0.1
                        </p>
                    </div>
                </mdui-card>
            </div>
        </div>

    </div>

    <!-- navigation bar -->
    <mdui-navigation-bar value="apps" class="fixed bottom-0 left-0 right-0 z-30">
        <mdui-navigation-bar-item icon="build" value="apps"
            onclick="switchPage('appList')">程式列表</mdui-navigation-bar-item>
        <mdui-navigation-bar-item icon="tune" value="settings"
            onclick="switchPage('settings')">設定</mdui-navigation-bar-item>
        <mdui-navigation-bar-item icon="info" value="about" onclick="switchPage('about')">關於</mdui-navigation-bar-item>
    </mdui-navigation-bar>

    <!-- confirm delete dialog -->
    <mdui-dialog close-on-overlay-click class="dialog-confirm-uninstall">
        <span slot="headline">確定要刪除此應用程式嗎?</span>
        <span slot="description">請謹慎操作，刪除後將無法恢復，並且請避免刪除系統必要應用程式，否則可能會導致系統不穩定或無法啟動。</span>
        <mdui-button slot="action" variant="text">取消</mdui-button>
        <mdui-button slot="action" variant="tonal">刪除</mdui-button>
    </mdui-dialog>

    <!-- warning dialog -->
    <mdui-dialog class="dialog-warning">
        <span slot="headline" class="font-bold">免責聲明</span>
        <span slot="description">
            解除安裝必要程式可能導致 Android 系統的損壞，請謹慎操作，不要解除安裝你沒把握的應用程式！
            <br />
            我們並不會對任何因使用本程式而導致的損壞或資料會損負責。
            <br />
            <br />
            當您按下確定按鈕，即表示您已經同意上述條款。
            <br />
            <br />
            <span class="text-yellow-600 font-bold">
                注意：部分中國手機無法支援！
            </span>
        </span>
        <mdui-button slot="action" variant="tonal" onclick="dialogWarning.open = false;">確定</mdui-button>
    </mdui-dialog>

    <!-- appinfo dialog -->
    <mdui-dialog close-on-overlay-click class="dialog-appinfo">
        <mdui-top-app-bar slot="header">
            <mdui-top-app-bar-title class="ml-4">應用程式資訊</mdui-top-app-bar-title>
            <mdui-button variant="text" onclick="dialogAppInfo.open = false;">關閉</mdui-button>
        </mdui-top-app-bar>
        <span slot="description">
            <div class="flex flex-col gap-2">
                <p>APP包名: <span id="app-package">com.android.vending</span></p>
                <p>APP版本: <span id="app-version">7.56.0</span></p>
                <p>最後更新: <span id="app-size">2025-04-26 17:19:49</span></p>
                <p>啟用狀態: <span id="app-status">啟用中</span></p>
            </div>
        </span>
        <div class="flex flex-col w-full gap-5 mt-6">
            <div class="flex w-full gap-6">
                <mdui-button slot="action" variant="tonal" icon="power_settings_new" class="flex-1"
                    disabled>啟用程式</mdui-button>
                <mdui-button slot="action" variant="tonal" icon="power_off" class="flex-1">停用程式</mdui-button>
            </div>
            <div class="flex w-full gap-6">
                <mdui-button slot="action" variant="tonal" icon="download" class="flex-1">提取APK</mdui-button>
                <mdui-button slot="action" variant="tonal" icon="delete" class="flex-1"
                    onclick="uninstallApp(1);">刪除</mdui-button>
            </div>
        </div>
    </mdui-dialog>

    <!-- delete app dialog -->
    <mdui-dialog close-on-overlay-click class="dialog-delete-app">
        <span slot="headline">刪除應用程式</span>
        <span slot="description">
            <div class="flex flex-col gap-3">
                <p>您確定要刪除應用程式 <span id="delete-app-name" class="font-medium">com.android.vending</span> 嗎？</p>

                <p class="text-yellow-600 font-bold">注意：請不要刪除系統必要應用程式，否則可能會導致系統不穩定或無法啟動。</p>

                <div class="flex items-center gap-2 mt-2">
                    <mdui-checkbox id="delete-app-data">同時刪除APP資料</mdui-checkbox>
                </div>
            </div>
        </span>
        <mdui-button slot="action" variant="text"
            onclick="document.querySelector('.dialog-delete-app').open = false">取消</mdui-button>
        <mdui-button id="confirm-delete-btn" slot="action" variant="filled" color="error">確認刪除</mdui-button>
    </mdui-dialog>

    <!-- adb response dialog -->
    <mdui-dialog close-on-overlay-click class="dialog-adb-response">
        <span slot="headline" class="w-screen">ADB 回應</span>
        <span slot="description">
            <div class="flex flex-col gap-3">
                <p>回應內容：</p>
                <p id="adb-response" class="text-gray-500">Package com.quicinc.voice.activation new state: disabled-user
                </p>
            </div>
        </span>
        <mdui-button slot="action" variant="text"
            onclick="document.querySelector('.dialog-adb-response').open = false">關閉</mdui-button>
    </mdui-dialog>

    <!-- info snackbar -->
    <mdui-snackbar class="snackbar-connected mb-20" id="snackbar-alert" auto-close-delay="2500"></mdui-snackbar>
</body>

<template id="app-card-template">
    <mdui-card clickable variant="elevated" class="w-full h-20 flex rounded-none">
        <mdui-avatar class="my-auto mx-4" icon="adb"></mdui-avatar>
        <div class="flex flex-col justify-center flex-1 min-w-0">
            <p class="text-lg truncate w-11/12">{{app.name}}</p>
            <p class="text-md text-gray-500">{{app.type}}</p>
        </div>
        <!-- <mdui-button-icon variant="tonal" class="my-auto ml-auto mr-6" icon="info"></mdui-button-icon> -->
    </mdui-card>
</template>

<template id="question-dialog-template">
    <mdui-dialog close-on-overlay-click class="dialog-question">
        <span slot="headline">{{title.label}}</span>
        <span slot="description">{{description.label}}</span>
        <mdui-button slot="action" variant="text" id="question-dialog-deny-button">{{deny.label}}</mdui-button>
        <mdui-button slot="action" variant="tonal" id="question-dialog-accept-button">{{accept.label}}</mdui-button>
    </mdui-dialog>
</template>

</html>